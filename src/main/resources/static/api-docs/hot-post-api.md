# çƒ­ç‚¹å¸–å­APIæ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†æ ¡å›­ç¤¾åŒºå¹³å°çš„çƒ­ç‚¹å¸–å­åŠŸèƒ½ç›¸å…³æŽ¥å£ã€‚çƒ­ç‚¹å¸–å­åŠŸèƒ½é€šè¿‡è®¡ç®—å¸–å­çš„çƒ­åº¦å€¼ï¼Œä¸ºç”¨æˆ·å±•ç¤ºæœ€å—æ¬¢è¿Žçš„å†…å®¹ï¼ŒåŒ…æ‹¬æ™®é€šçƒ­ç‚¹å¸–å­å’Œçªå‘çƒ­ç‚¹å¸–å­ã€‚

## æŽ¥å£åˆ—è¡¨

### 1. èŽ·å–çƒ­ç‚¹å¸–å­åˆ—è¡¨

èŽ·å–æŒ‰çƒ­åº¦æŽ’åºçš„å¸–å­åˆ—è¡¨ã€‚

#### è¯·æ±‚ä¿¡æ¯

- **æŽ¥å£URL**: `/api/posts/hot`
- **è¯·æ±‚æ–¹å¼**: GET
- **æŽ¥å£æè¿°**: èŽ·å–çƒ­ç‚¹å¸–å­åˆ—è¡¨ï¼ŒæŒ‰çƒ­åº¦å€¼é™åºæŽ’åº
- **æƒé™è¦æ±‚**: æ— éœ€ç™»å½•ï¼Œå…¬å¼€æŽ¥å£

#### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»åž‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° |
|-------|------|------|--------|------|
| limit | Integer | å¦ | 10 | èŽ·å–çš„å¸–å­æ•°é‡ï¼Œé»˜è®¤10æ¡ |

#### å“åº”ç»“æžœ

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "postId": 12,
      "userId": 1,
      "username": "å¼ ä¸‰",
      "avatar": "https://example.com/avatar.jpg",
      "categoryId": 1,
      "categoryName": "æ ¡å›­ç”Ÿæ´»",
      "title": "æ ¡å›­ç¾Žé£ŸæŽ¨è",
      "content": "ä»Šå¤©å‘çŽ°äº†ä¸€å®¶è¶…çº§å¥½åƒçš„é¤åŽ…...",
      "postType": "NORMAL",
      "bountyAmount": null,
      "bountyStatus": null,
      "emergencyLevel": 0,
      "viewCount": 10,
      "likeCount": 5,
      "commentCount": 3,
      "shareCount": 2,
      "status": "PUBLISHED",
      "createdAt": "2024-04-25T10:30:00",
      "updatedAt": "2024-04-25T10:30:00",
      "hotness": 0.4664898906799226,
      "isNew": false,
      "isBurst": false,
      "rank": 1
    },
    // æ›´å¤šå¸–å­...
  ]
}
```

#### å“åº”å­—æ®µè¯´æ˜Ž

| å­—æ®µå | ç±»åž‹ | æè¿° |
|-------|------|------|
| postId | Long | å¸–å­ID |
| userId | Long | å‘å¸ƒè€…ç”¨æˆ·ID |
| username | String | å‘å¸ƒè€…ç”¨æˆ·å |
| avatar | String | å‘å¸ƒè€…å¤´åƒURL |
| categoryId | Integer | åˆ†ç±»ID |
| categoryName | String | åˆ†ç±»åç§° |
| title | String | å¸–å­æ ‡é¢˜ |
| content | String | å¸–å­å†…å®¹ |
| postType | String | å¸–å­ç±»åž‹ï¼ŒNORMAL-æ™®é€šå¸–å­ï¼ŒBOUNTY-æ‚¬èµå¸–å­ |
| bountyAmount | Decimal | æ‚¬èµé‡‘é¢ï¼Œä»…å½“postTypeä¸ºBOUNTYæ—¶æœ‰æ•ˆ |
| bountyStatus | String | æ‚¬èµçŠ¶æ€ï¼ŒOPEN-å¾…æŽ¥å•ï¼ŒPROCESSING-è¿›è¡Œä¸­ï¼ŒCOMPLETED-å·²å®Œæˆ |
| emergencyLevel | Integer | ç´§æ€¥ç¨‹åº¦ï¼ˆ0-5çº§ï¼Œ0ä¸ºæ™®é€šï¼‰ |
| viewCount | Integer | æµè§ˆé‡ |
| likeCount | Integer | ç‚¹èµžæ•° |
| commentCount | Integer | è¯„è®ºæ•° |
| shareCount | Integer | åˆ†äº«æ•° |
| status | String | å¸–å­çŠ¶æ€ï¼ŒPUBLISHED-å·²å‘å¸ƒï¼ŒDRAFT-è‰ç¨¿ï¼ŒCLOSED-å·²å…³é—­ï¼ŒDELETED-å·²åˆ é™¤ |
| createdAt | String | åˆ›å»ºæ—¶é—´ï¼Œæ ¼å¼ï¼šyyyy-MM-ddTHH:mm:ss |
| updatedAt | String | æ›´æ–°æ—¶é—´ï¼Œæ ¼å¼ï¼šyyyy-MM-ddTHH:mm:ss |
| hotness | Double | çƒ­åº¦å€¼ï¼Œè¶Šé«˜è¡¨ç¤ºè¶Šçƒ­é—¨ |
| isNew | Boolean | æ˜¯å¦ä¸ºæ–°å‘å¸ƒï¼ˆ24å°æ—¶å†…ï¼‰ |
| isBurst | Boolean | æ˜¯å¦ä¸ºçªå‘çƒ­ç‚¹ |
| rank | Integer | çƒ­åº¦æŽ’å |

### 2. èŽ·å–çƒ­ç‚¹å¸–å­åˆ—è¡¨ï¼ˆå¸¦åˆ†é¡µï¼‰

èŽ·å–æŒ‰çƒ­åº¦æŽ’åºçš„å¸–å­åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€‚

#### è¯·æ±‚ä¿¡æ¯

- **æŽ¥å£URL**: `/api/posts/hot/page`
- **è¯·æ±‚æ–¹å¼**: GET
- **æŽ¥å£æè¿°**: èŽ·å–çƒ­ç‚¹å¸–å­åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µï¼ŒæŒ‰çƒ­åº¦å€¼é™åºæŽ’åº
- **æƒé™è¦æ±‚**: æ— éœ€ç™»å½•ï¼Œå…¬å¼€æŽ¥å£

#### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»åž‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° |
|-------|------|------|--------|------|
| page | Integer | å¦ | 1 | é¡µç ï¼Œä»Ž1å¼€å§‹ |
| pageSize | Integer | å¦ | 10 | æ¯é¡µå¤§å°ï¼Œé»˜è®¤10æ¡ |

#### å“åº”ç»“æžœ

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "postId": 12,
        "userId": 1,
        "username": "å¼ ä¸‰",
        "avatar": "https://example.com/avatar.jpg",
        "categoryId": 1,
        "categoryName": "æ ¡å›­ç”Ÿæ´»",
        "title": "æ ¡å›­ç¾Žé£ŸæŽ¨è",
        "content": "ä»Šå¤©å‘çŽ°äº†ä¸€å®¶è¶…çº§å¥½åƒçš„é¤åŽ…...",
        "postType": "NORMAL",
        "bountyAmount": null,
        "bountyStatus": null,
        "emergencyLevel": 0,
        "viewCount": 10,
        "likeCount": 5,
        "commentCount": 3,
        "shareCount": 2,
        "status": "PUBLISHED",
        "createdAt": "2024-04-25T10:30:00",
        "updatedAt": "2024-04-25T10:30:00",
        "hotness": 0.4664898906799226,
        "isNew": false,
        "isBurst": false,
        "rank": 1
      },
      // æ›´å¤šå¸–å­...
    ],
    "total": 7,
    "size": 10,
    "current": 1,
    "pages": 1
  }
}
```

#### å“åº”å­—æ®µè¯´æ˜Ž

| å­—æ®µå | ç±»åž‹ | æè¿° |
|-------|------|------|
| records | Array | å¸–å­åˆ—è¡¨ï¼Œæ¯ä¸ªå¸–å­å­—æ®µåŒä¸Šä¸€æŽ¥å£ |
| total | Integer | æ€»è®°å½•æ•° |
| size | Integer | æ¯é¡µå¤§å° |
| current | Integer | å½“å‰é¡µç  |
| pages | Integer | æ€»é¡µæ•° |

### 3. èŽ·å–çªå‘çƒ­ç‚¹å¸–å­åˆ—è¡¨

èŽ·å–çªå‘çƒ­ç‚¹å¸–å­åˆ—è¡¨ã€‚

#### è¯·æ±‚ä¿¡æ¯

- **æŽ¥å£URL**: `/api/posts/hot/burst`
- **è¯·æ±‚æ–¹å¼**: GET
- **æŽ¥å£æè¿°**: èŽ·å–çªå‘çƒ­ç‚¹å¸–å­åˆ—è¡¨ï¼ŒæŒ‰çƒ­åº¦å€¼é™åºæŽ’åº
- **æƒé™è¦æ±‚**: æ— éœ€ç™»å½•ï¼Œå…¬å¼€æŽ¥å£

#### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»åž‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° |
|-------|------|------|--------|------|
| limit | Integer | å¦ | 5 | èŽ·å–çš„å¸–å­æ•°é‡ï¼Œé»˜è®¤5æ¡ |

#### å“åº”ç»“æžœ

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "postId": 10,
      "userId": 2,
      "username": "æŽå››",
      "avatar": "https://example.com/avatar.jpg",
      "categoryId": 2,
      "categoryName": "æ ¡å›­æ´»åŠ¨",
      "title": "æ ¡å›­æ­Œæ‰‹å¤§èµ›æŠ¥åå¼€å§‹",
      "content": "ç¬¬åå±Šæ ¡å›­æ­Œæ‰‹å¤§èµ›æŠ¥åå¼€å§‹å•¦...",
      "postType": "NORMAL",
      "bountyAmount": null,
      "bountyStatus": null,
      "emergencyLevel": 0,
      "viewCount": 50,
      "likeCount": 30,
      "commentCount": 20,
      "shareCount": 10,
      "status": "PUBLISHED",
      "createdAt": "2024-04-26T08:15:00",
      "updatedAt": "2024-04-26T08:15:00",
      "hotness": 0.0733696212268513,
      "isNew": true,
      "isBurst": true,
      "rank": 1
    },
    // æ›´å¤šå¸–å­...
  ]
}
```

#### å“åº”å­—æ®µè¯´æ˜Ž

å“åº”å­—æ®µåŒç¬¬ä¸€ä¸ªæŽ¥å£ã€‚

## çƒ­åº¦è®¡ç®—è¯´æ˜Ž

çƒ­ç‚¹å¸–å­çš„çƒ­åº¦å€¼é€šè¿‡ä»¥ä¸‹å› ç´ è®¡ç®—ï¼š

1. **åŸºç¡€æŒ‡æ ‡**ï¼š
   - æµè§ˆé‡ï¼ˆæƒé‡ï¼š0.2ï¼‰
   - ç‚¹èµžé‡ï¼ˆæƒé‡ï¼š0.3ï¼‰
   - è¯„è®ºé‡ï¼ˆæƒé‡ï¼š0.25ï¼‰
   - åˆ†äº«é‡ï¼ˆæƒé‡ï¼š0.1ï¼‰
   - æ”¶è—é‡ï¼ˆæƒé‡ï¼š0.15ï¼‰

2. **æ—¶é—´è¡°å‡**ï¼š
   - å¸–å­å‘å¸ƒæ—¶é—´è¶Šä¹…ï¼Œçƒ­åº¦å€¼è¶Šä½Ž
   - è¡°å‡ç³»æ•°ï¼š0.2

3. **çªå‘ç³»æ•°**ï¼š
   - å½“å¸–å­åœ¨çŸ­æ—¶é—´å†…ï¼ˆå¦‚1å°æ—¶å†…ï¼‰è¯„è®ºé‡è¶…è¿‡é˜ˆå€¼ï¼ˆ100æ¡ï¼‰æ—¶ï¼Œä¼šè§¦å‘çªå‘ç³»æ•°
   - çªå‘ç³»æ•°å€æ•°ï¼š1.5

## å‰ç«¯å±•ç¤ºå»ºè®®

1. **çƒ­ç‚¹æ ‡è®°**ï¼š
   - åœ¨å¸–å­åˆ—è¡¨æˆ–è¯¦æƒ…é¡µé¢ï¼Œä¸ºçƒ­åº¦å€¼é«˜çš„å¸–å­æ·»åŠ "çƒ­é—¨"æ ‡è®°
   - ä¸ºæ–°å‘å¸ƒï¼ˆ24å°æ—¶å†…ï¼‰çš„å¸–å­æ·»åŠ "æ–°"æ ‡è®°
   - ä¸ºçªå‘çƒ­ç‚¹å¸–å­æ·»åŠ "çˆ†"æ ‡è®°

2. **çƒ­åº¦å€¼å±•ç¤º**ï¼š
   - å¯ä»¥åœ¨å¸–å­å¡ç‰‡ä¸Šæ˜¾ç¤ºçƒ­åº¦å€¼æˆ–çƒ­åº¦æŽ’å
   - ä½¿ç”¨ä¸åŒé¢œè‰²æˆ–å›¾æ ‡è¡¨ç¤ºçƒ­åº¦ç­‰çº§ï¼ˆå¦‚ï¼šðŸ”¥ðŸ”¥ðŸ”¥ï¼‰

3. **çªå‘çƒ­ç‚¹ä¸“åŒº**ï¼š
   - åœ¨é¦–é¡µæˆ–ç¤¾åŒºé¡µé¢è®¾ç½®"çªå‘çƒ­ç‚¹"ä¸“åŒºï¼Œå±•ç¤ºçªå‘çƒ­ç‚¹å¸–å­
   - å¯ä»¥ä½¿ç”¨è½®æ’­æˆ–ç‰¹æ®Šæ ·å¼çªå‡ºæ˜¾ç¤º

4. **çƒ­åº¦è¶‹åŠ¿**ï¼š
   - å¯ä»¥å±•ç¤ºå¸–å­çƒ­åº¦å˜åŒ–è¶‹åŠ¿ï¼ˆä¸Šå‡ã€ä¸‹é™æˆ–ç¨³å®šï¼‰
   - ä½¿ç”¨ç®­å¤´æˆ–å›¾è¡¨ç›´è§‚å±•ç¤º

## é”™è¯¯ç è¯´æ˜Ž

| é”™è¯¯ç  | æè¿° |
|-------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

## ç¤ºä¾‹ä»£ç 

### èŽ·å–çƒ­ç‚¹å¸–å­åˆ—è¡¨

```javascript
// ä½¿ç”¨fetch API
fetch('/api/posts/hot?limit=10')
  .then(response => response.json())
  .then(data => {
    if (data.code === 200) {
      const hotPosts = data.data;
      // å¤„ç†çƒ­ç‚¹å¸–å­æ•°æ®
      renderHotPosts(hotPosts);
    } else {
      console.error('èŽ·å–çƒ­ç‚¹å¸–å­å¤±è´¥:', data.message);
    }
  })
  .catch(error => {
    console.error('è¯·æ±‚å¤±è´¥:', error);
  });

// ä½¿ç”¨axios
axios.get('/api/posts/hot', {
  params: {
    limit: 10
  }
})
.then(response => {
  if (response.data.code === 200) {
    const hotPosts = response.data.data;
    // å¤„ç†çƒ­ç‚¹å¸–å­æ•°æ®
    renderHotPosts(hotPosts);
  } else {
    console.error('èŽ·å–çƒ­ç‚¹å¸–å­å¤±è´¥:', response.data.message);
  }
})
.catch(error => {
  console.error('è¯·æ±‚å¤±è´¥:', error);
});
```

### èŽ·å–çªå‘çƒ­ç‚¹å¸–å­

```javascript
// ä½¿ç”¨fetch API
fetch('/api/posts/hot/burst?limit=5')
  .then(response => response.json())
  .then(data => {
    if (data.code === 200) {
      const burstPosts = data.data;
      // å¤„ç†çªå‘çƒ­ç‚¹å¸–å­æ•°æ®
      renderBurstPosts(burstPosts);
    } else {
      console.error('èŽ·å–çªå‘çƒ­ç‚¹å¸–å­å¤±è´¥:', data.message);
    }
  })
  .catch(error => {
    console.error('è¯·æ±‚å¤±è´¥:', error);
  });
``` 